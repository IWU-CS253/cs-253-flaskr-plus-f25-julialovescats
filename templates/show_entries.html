{% extends "layout.html" %}
{% block body %}
    <form action="{{ url_for('add_entry') }}" method="post" class="add-entry">
        <dl>
            <dt>Title:
            <dd><input type="text" size="30" name="title">
            <dt>Text:
            <dd><textarea name="text" rows="5" cols="40"></textarea>
            <dt>Category (optional):
            <dd><input type="text" size="30" name="category">
            <dd><input type="submit" value="Share">
        </dl>
    </form>
    <form action="{{ url_for('show_entries') }}" method="get">
        <h2>Filter by category:</h2>
        <h4>All categories:</h4>
        <input type="radio" name="category" value="">
        {% for cat in categories %}
            {% if cat.category %}
                <h4>{{ cat.category }}:</h4>
                <input type="radio" name="category" value="{{ cat.category }}">
            {% endif %}
        {% endfor %}
        <div></div>
        <button type="submit">Filter</button>
    </form>
    <ul class="entries">
        {% for entry in entries %}
            <li><h2>{{ entry.title }}</h2>
                <h4>Text: {{ entry.text|safe }}</h4>
                {% if entry.category %}<h4>Category: {{ entry.category | safe }}</h4>{% else %}
                    <form action="{{ url_for('add_category') }}" method="post" class="add-category"><h4> Add
                        category: </h4><input type="text" name="category"><input type="hidden" name="id"
                                                                                 value="{{ entry.id }}"><input
                            type="submit" value="Share"></form>{% endif %}</li>
        {% else %}
            <li><em>Unbelievable. No entries here so far</em></li>
        {% endfor %}
    </ul>
{% endblock %}
